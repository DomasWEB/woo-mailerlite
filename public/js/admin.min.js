jQuery(document).ready(function(e){var o=e("#woocommerce_mailerlite_group");if(0!==o.length){var t=o.next(".select2-container");e('<span id="woo-ml-refresh-groups" class="woo-ml-icon-refresh" data-woo-ml-refresh-groups="true"></span>').insertAfter(t)}var a=!1;e(document).on("click","[data-woo-ml-refresh-groups]",function(o){if(o.preventDefault(),!a){var r=e(this);r.removeClass("error"),r.addClass("running"),a=!0,jQuery.ajax({url:woo_ml_post.ajax_url,type:"post",data:{action:"post_woo_ml_refresh_groups"},success:function(e){e.indexOf("success")>=0&&r.removeClass("running"),e?location.reload():r.addClass("error"),a=!1}})}});var s=!1,c=e("#woo-ml-sync-untracked-orders-progress-bar");e(document).on("click","[data-woo-ml-sync-untracked-orders]",function(o){if(o.preventDefault(),!s){s=!0,console.log("Synchronize untracked orders");var t=e(this);orders_tracked=t.data("woo-ml-untracked-orders-count"),all_untracked_orders_left=t.data("woo-ml-untracked-orders-left"),t.data("woo-ml-untracked-orders-cycle"),fail=e("#woo-ml-sync-untracked-orders-fail"),success=e("#woo-ml-sync-untracked-orders-success"),r=0,console.log("inside the loop!"),jQuery.ajax({url:woo_ml_post.ajax_url,type:"post",beforeSend:function(){t.prop("disabled",!0),c.show(),r++},data:{action:"post_woo_ml_sync_untracked_orders"},async:1,success:function(e){if(1==e)console.log("done!"),console.log("Response: True"),t.hide(),c.hide(),fail.hide(),success.show();else{t.prop("disabled",0);var o=all_untracked_orders_left-e;t.data("woo-ml-untracked-orders-count",o),t.data("woo-ml-untracked-orders-left",o),t.prop("value","Synchronize "+o+" remaining untracked orders."),fail.show()}}})}});var l=e("#woocommerce_mailerlite_api_key");e('<button id="woo-ml-validate-key" class="button-primary">Validate Key</button>').insertAfter(l),e(document).on("click","#woo-ml-validate-key",function(o){if(o.preventDefault(),!a){var r=e("#woocommerce_mailerlite_api_key").val();jQuery.ajax({url:woo_ml_post.ajax_url,type:"post",data:{action:"post_woo_ml_validate_key",key:r},async:!1,success:function(e){location.reload()}})}}),e("#woocommerce_mailerlite_group").length>0&&e("#woocommerce_mailerlite_group").select2(),e("#woocommerce_mailerlite_ignore_product_list").length>0&&e("#woocommerce_mailerlite_ignore_product_list").select2();var n=e("#woocommerce_mailerlite_consumer_secret");0!==n.length&&n.next(".description").closest("tr").after('<h2>Integration Details</h2>                                    <p class="section-description">Customize MailerLite integration for WooCommerce</p>');e("#woocommerce_mailerlite_popups").closest("tr").before('<h2>Popups</h2>                                        <p class="section-description">Display pop-up subscribe forms created within MailerLite</p>');var i=e('[name="save"]');0!==l.length&&0===n.length?i.hide():i.show();var d=e("#woocommerce_mailerlite_ignore_product_list");0!==d.length&&d.closest("tr").before('<h2>E-commerce Automations</h2>            <p class="section-description">Customize settings for your e-commerce automations created in MailerLite </p>')});