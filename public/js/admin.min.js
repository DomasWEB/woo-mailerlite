jQuery(document).ready(function(r){var o=r("#woocommerce_mailerlite_group");if(0!==o.length){var e=o.next(".select2-container");r('<span id="woo-ml-refresh-groups" class="woo-ml-icon-refresh" data-woo-ml-refresh-groups="true"></span>').insertAfter(e)}var s=!1;r(document).on("click","[data-woo-ml-refresh-groups]",function(o){if(o.preventDefault(),!s){var e=r(this);e.removeClass("error"),e.addClass("running"),s=!0,jQuery.ajax({url:woo_ml_post.ajax_url,type:"post",data:{action:"post_woo_ml_refresh_groups"},success:function(o){0<=o.indexOf("success")&&e.removeClass("running"),o?location.reload():e.addClass("error"),s=!1}})}});var a=!1,n=0,t=0,l=0,c=r("#woo-ml-sync-untracked-orders-progress-bar"),d=0;r(document).on("click","[data-woo-ml-sync-untracked-orders]",function(o){if(o.preventDefault(),!a){a=!0,console.log("Synchronize untracked orders");var e=r(this);for(e.prop("disabled",!0),c.show(),n=e.data("woo-ml-untracked-orders-count"),t=e.data("woo-ml-untracked-orders-left"),l=e.data("woo-ml-untracked-orders-cycle"),console.log("untrackedOrdersCount >> "+n),console.log("untrackedOrdersLeft >> "+t),console.log("untrackedOrdersCycle >> "+l);0<t;)console.log("inside the loop!"),jQuery.ajax({url:woo_ml_post.ajax_url,type:"post",data:{action:"post_woo_ml_sync_untracked_orders"},async:!1,success:function(o){0<=o.indexOf("success")&&console.log("done!"),o?(console.log("Response: True"),d=100*(n-(t-=l))/n,c.find("div").css("width",d+"%")):console.log("Response: False")}});console.log("loop finished!"),e.hide(),c.hide(),r("#woo-ml-sync-untracked-orders-success").show()}});var i=r("#woocommerce_mailerlite_api_key");r('<button id="woo-ml-validate-key" class="button-primary">Validate Key</button>').insertAfter(i),r(document).on("click","#woo-ml-validate-key",function(o){var e=r("#woocommerce_mailerlite_api_key").val();jQuery.ajax({url:woo_ml_post.ajax_url,type:"post",data:{action:"post_woo_ml_validate_key",key:e},success:function(o){location.reload()}})})});